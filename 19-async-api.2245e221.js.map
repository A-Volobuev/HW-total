{"mappings":"oeAAA,MAEMA,EAAU,CACZC,QAAS,CACL,YAJQ,0E,2CCQG,MAAbC,EAAcC,SAASC,cAAc,iBACrCC,EAAmBF,SAASC,cAAc,aAC1CE,EAAmBH,SAASC,cAAc,sBAC1CG,EAASJ,SAASC,cAAc,qBAGhCI,EAAgB,IDJP,MACXC,cAE2BC,KAAlBC,QAAU,E,CAGnBC,oBACI,MAEMC,QAA0BC,MAFd,sCAE+Bd,GAGjD,aAFsCa,EAAkBE,M,CAK5DH,wBAEI,MAAMI,EAAkB,wDAAuCN,KAAKC,UAE9DM,QAAgCH,MAAME,EAAiBhB,GAG7D,aAFqBiB,EAAwBF,M,CAK7CG,cACA,OAAOR,KAAKC,O,CAGZO,YAAQC,GACRT,KAAKC,QAAUQ,C,GC8BL,SAATC,EAAgBC,GACrBnB,EAAYoB,mBAAmB,aAAa,EAAAC,EAAAC,SAAsBH,G,CAtD5CnB,EAAduB,iBAAiB,UAOE,SAAFC,GAEyClB,EAApDG,QAAUe,EAAEC,cAAcC,MAExCrB,EAAOsB,UAAUC,OAAO,YAGWtB,EAArBuB,kBACbC,MAAKX,IAiDNhB,EAAiB4B,UAAY,GANC,SAAKZ,GACnChB,EAAiBiB,mBAAmB,aAAY,EAAAY,EAAAV,SAAuBH,G,CAxCnEc,CAA6Bd,GAE7Bd,EAAOsB,UAAUO,IAAI,WAAW,IAEnCC,OAAMC,IACHC,EAAAC,OAAOC,QACH,SACM,GAAHH,IACH,OACH,G,IA1B0CpC,EAAvCuB,iBAAiB,SAAS,WAClCnB,EAAiBuB,UAAUO,IAAI,W,IA+B/BlC,EAAY2B,UAAUO,IAAI,YAG1B5B,EAAckC,cACTV,KAAKZ,GACLiB,OAAMC,IACHC,EAAAC,OAAOC,QACH,SACM,GAAHH,IACH,OACC,IAEb/B,EAAOsB,UAAUO,IAAI,YACrBlC,EAAY2B,UAAUC,OAAO","sources":["src/js/components/19-async-cat-api.js","src/js/19-async-api.js"],"sourcesContent":["const API_KEY = 'live_7ad8upyX21GZXAiarpBVFKI96kSct8KgO5N7x1ungdbJekziVwWJNouLsXsd0P7L';\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst options = {\n    headers: {\n        'X-Api-Key': API_KEY,\n    },\n};\n\n\n\nexport default class CatApiService {\n    constructor() {\n        // 5. Сохраняем выбраную породу\n        this.breedId = '';\n    }\n\n    async fetchBreeds() {\n        const breedsUrl = `${BASE_URL}/breeds`\n\n        const selectFetchBreeds = await fetch(breedsUrl, options);\n        const resultSelectFetchBreeds = await selectFetchBreeds.json();\n\n        return resultSelectFetchBreeds;\n    }\n\n    async fetchCatByBreed () {\n        // настройки для запроса с сервера\n        const selectBreedsUrl = `${BASE_URL}/images/search?breed_ids=${this.breedId}`\n\n        const fetchCatByBreedInSelect = await fetch(selectBreedsUrl, options);\n        const result = await fetchCatByBreedInSelect.json();\n\n        return result;\n    }\n\n    get idBreed() {\n        return this.breedId;\n    }\n\n    set idBreed(newBreedId) {\n        this.breedId = newBreedId;\n    }\n}","// Импортирую настройки select из хбс\nimport '../scss/19-api.scss'\nimport CatApiService from './components/19-async-cat-api';\nimport createOptionsInSelect from '../templates/19-select-option.hbs';\nimport informationBlockMarkup from '../templates/19-informative-block.hbs';\nimport { Report } from 'notiflix/build/notiflix-report-aio';\n\n// Привязываем элементы \nconst selectBreed = document.querySelector('.breed-select');\nconst informativeBlock = document.querySelector('.cat-info');\nconst decorativeOption = document.querySelector('.decorative-option');\nconst loader = document.querySelector('.container-loader');\n\n// Добавляем сюда наш класс запросов\nconst catApiService = new CatApiService();\n\n// Слушатель событий на селектор\nselectBreed.addEventListener('change', onSelectBreedChange);\n    //Добавил что бы при первом клике убрать декоративный пустой option с select \nselectBreed.addEventListener('click', function () {\n    decorativeOption.classList.add('is-hiden');\n});\n\n//------ Функция при выборе на селекте породы \nfunction onSelectBreedChange(e) {\n    // Сохраняем выбранную в переменную, для дальнейшей загрузки полной информации\n    catApiService.breedId = e.currentTarget.value;\n\n    loader.classList.remove('is-hiden');\n    \n    // Добавляем разметку на конкретную породу\n    catApiService.fetchCatByBreed()\n    .then(data => {\n        // Очищаем страницу при выборе новой породы\n        clearInformationBlock();\n\n        createInformationBlockMarkup(data);\n\n        loader.classList.add('is-hiden')\n    })\n    .catch(error => {\n        Report.failure(\n            'Ошибка',\n            `${error}`,\n            'Okay',\n        );\n    });\n}\n\n// 3. создаем функцию запроса и добавляем выбор в селект\nfunction selectOption() {\n    selectBreed.classList.add('is-hiden')\n\n\n    catApiService.fetchBreeds()\n        .then(addSelectBreed)\n        .catch(error => {\n            Report.failure(\n                'Ошибка',\n                `${error}`,\n                'Okay',\n                );})\n\n    loader.classList.add('is-hiden')\n    selectBreed.classList.remove('is-hiden')\n}\n// 3. Вызываем фукнцию\nselectOption();\n\n// 3. Функция добавления option в select\nfunction addSelectBreed (data) {\n    selectBreed.insertAdjacentHTML('beforeend', createOptionsInSelect(data))\n}\n\n// 7. Функция добавляет разметку на страницу\nfunction createInformationBlockMarkup (data) {\n    informativeBlock.insertAdjacentHTML('beforeend',informationBlockMarkup(data)) \n}\n\n// 7. Функция очистки разметки \nfunction clearInformationBlock () {\n    informativeBlock.innerHTML = '';\n}\n\n\n// 1. Получаем ключ\n// 2. Делаем Гет запрос\n// 3. При успешном запросе, необходимо наполнить select.breed-select опциями так, чтобы value опции содержал id породы,\n    //  а в интерфейсе пользователю отображалось название породы. \n// 4.Когда пользователь выбирает опцию в селекте, необходимо выполнять запрос за полной информацией о коте на ресурс\n    //  https://api.thecatapi.com/v1/images/search. Не забудь указать в этом запросе параметр строки запроса breed_ids \n    // с идентификатором породы.\n// 5. Сохраняем выбраную породу в breedId\n// 6. fetchCatByBreed(breedId) которая ожидает идентификатор породы, делает HTTP-запрос и возвращает промис с данными \n    // о коте - результатом запроса.\n// 7. Если запрос был успешный, под селектом, в блоке div.cat-info появляется изображение и развернутая информация о \n    // коте: название породы, описание и темперамент."],"names":["$b0199a8d4ba20d3d$var$options","headers","$e345ae201d41f65c$var$selectBreed","document","querySelector","$e345ae201d41f65c$var$informativeBlock","$e345ae201d41f65c$var$decorativeOption","$e345ae201d41f65c$var$loader","$e345ae201d41f65c$var$catApiService","constructor","this","breedId","async","selectFetchBreeds","fetch","json","selectBreedsUrl","fetchCatByBreedInSelect","idBreed","newBreedId","$e345ae201d41f65c$var$addSelectBreed","data","insertAdjacentHTML","$2flVd","default","addEventListener","e","currentTarget","value","classList","remove","fetchCatByBreed","then","innerHTML","$eZ5kQ","$e345ae201d41f65c$var$createInformationBlockMarkup","add","catch","error","$i37YJ","Report","failure","fetchBreeds"],"version":3,"file":"19-async-api.2245e221.js.map"}